import type {Plugin} from 'onecmd';
import {serializeLines} from './util/serialize-lines';

export const git = (): Plugin => ({
  sources: [
    {
      type: 'object',
      path: '.gitignore',
      versioned: true,

      generate: (otherSources) =>
        Object.entries(otherSources).reduce(
          (paths, [path, {versioned}]) =>
            versioned ? paths : [...paths, path],
          ['# This file is generated by onecmd.']
        ),

      serialize: serializeLines,
    },
  ],
});
