import type {Plugin} from 'onecmd';
import {serializeLines} from './util/serialize-lines';

export const git = (): Plugin => ({
  sources: [
    {
      type: 'object',
      path: '.gitignore',
      versionable: true,

      generate: (otherSources) =>
        Object.entries(otherSources).reduce(
          (paths, [path, {versionable}]) =>
            versionable ? paths : [...paths, path],
          ['# This file is generated by onecmd.']
        ),

      serialize: serializeLines,
    },
  ],
});
